# 実装詳細: 経費一覧のカテゴリ・状態の日本語表示対応

## 実装日時
2025年7月27日 17:15

## 概要
経費申請一覧画面でカテゴリと状態が英語コードで表示されていた問題を修正。日本語名称で表示するようマッピング処理を追加。

## 背景
経費一覧画面において：
- カテゴリが `transport`、`meal` などの英語コードで表示
- 状態が `draft`、`submitted` などの英語コードで表示
- ユーザーフレンドリーでない表示となっていた

## 実装内容

### 1. マッピング定義の追加
**ファイル**: `frontend/src/utils/expenseMappers.ts`

#### カテゴリマッピング
```typescript
const CATEGORY_NAME_MAP: Record<string, string> = {
  transport: '交通費',
  meal: '食事・接待費',
  accommodation: '宿泊費',
  entertainment: 'エンターテイメント',
  office_supplies: '事務用品',
  book: '書籍・資料',
  seminar: 'セミナー・研修',
  other: 'その他'
};
```

#### 状態マッピング
```typescript
const STATUS_NAME_MAP: Record<string, string> = {
  draft: '下書き',
  submitted: '申請中',
  approved: '承認済み',
  rejected: '却下',
  paid: '支払済み',
  cancelled: 'キャンセル',
  expired: '期限切れ',
  closed: 'クローズド'
};
```

### 2. マッピング関数の更新
`mapBackendExpenseToExpenseData` 関数内で、カテゴリと状態のマッピングを適用：

```typescript
export function mapBackendExpenseToExpenseData(backendExpense: ExpenseBackendResponse): ExpenseData {
  return {
    // ... 他のフィールド
    category: CATEGORY_NAME_MAP[backendExpense.category] || backendExpense.category,
    status: STATUS_NAME_MAP[backendExpense.status] || backendExpense.status,
    // ... 他のフィールド
  };
}
```

## 動作説明
1. バックエンドから英語コードを受信
2. マッピング定義を参照して対応する日本語名称を取得
3. マッピングが存在しない場合は元のコードをそのまま使用（フォールバック）
4. フロントエンドの画面には日本語名称が表示される

## 利点
- ユーザーが理解しやすい日本語表示
- バックエンドのコード変更不要
- 新しいカテゴリ・状態の追加時はマッピング定義を更新するだけで対応可能
- 未定義のコードが来てもアプリケーションは正常動作（フォールバック）

## 今後の検討事項
1. マッピング定義を定数ファイルに切り出すことを検討
2. 国際化（i18n）対応時の実装方法
3. 他の画面（経費詳細、編集画面など）でも同様のマッピングが必要か確認

## 関連ファイル
- 前回の実装: `docs/implement/implement_20250727_165000.md`
- マッピング実装: `frontend/src/utils/expenseMappers.ts`

## コミット情報
- ブランチ: `fix/expense-list-mapping`
- コミットID: 66e0f19
- コミットメッセージ: feat(frontend): 経費一覧でカテゴリと状態を日本語表示に対応