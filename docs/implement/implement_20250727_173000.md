# 実装詳細: 経費カテゴリ管理の統一化

## 実装日時
2025年7月27日 17:30

## 概要
経費カテゴリの管理をexpense_categories APIベースに統一し、フロントエンドの定数定義を整理。

## 背景
- フロントエンドで21個のカテゴリが定義されていたが、バックエンドでは6つのみ
- 複数箇所でカテゴリラベルが重複定義されていた
- 経費一覧でカテゴリコードが表示されていた

## 実装内容

### 1. カテゴリ定数の整理
**ファイル**: `frontend/src/constants/expense.ts`

変更前: 21個のカテゴリ
```typescript
TRANSPORTATION, ACCOMMODATION, MEALS, ENTERTAINMENT, 
OFFICE_SUPPLIES, COMMUNICATION, TRAINING, CONFERENCE,
SOFTWARE, EQUIPMENT, BOOKS, PARKING, FUEL, MAINTENANCE,
INSURANCE, LEGAL, CONSULTING, MARKETING, UTILITIES, 
RENT, OTHER
```

変更後: 6個のカテゴリ（バックエンドと一致）
```typescript
TRANSPORT: "transport",
ENTERTAINMENT: "entertainment", 
SUPPLIES: "supplies",
BOOKS: "books",
SEMINAR: "seminar",
OTHER: "other"
```

### 2. カテゴリラベルの統一
- `EXPENSE_CATEGORY_LABELS`を6つに更新
- `EXPENSE_CATEGORY_COLORS`も同様に更新
- `CategoryChip.tsx`のExpenseCategory型とラベルも更新

### 3. カテゴリ表示の改善
**ファイル**: `frontend/src/components/features/expense/ExpenseHistoryView.tsx`

- `useCategories`フックを使用してAPIからカテゴリ情報を取得
- カテゴリコードからnameへのマッピングを動的に生成
- 経費一覧でカテゴリ名（日本語）を表示

### 4. 不要なマッピングの削除
**ファイル**: `frontend/src/utils/expenseMappers.ts`

- `CATEGORY_NAME_MAP`を削除
- カテゴリフィールドはコードをそのまま使用（表示時に変換）

## 改善点
1. **一元管理**: カテゴリ情報はexpense_categories APIから取得した情報のみを使用
2. **保守性向上**: カテゴリの追加・変更時はバックエンドのみ修正すれば反映される
3. **表示改善**: 経費一覧で日本語のカテゴリ名が表示される

## 注意事項
- カテゴリの追加・変更は必ずバックエンドから行う
- フロントエンドの定数はバックエンドと同期を保つ必要がある

## 関連ファイル
- `backend/internal/model/expense_category.go` - カテゴリマスタ定義
- `frontend/src/hooks/expense/useCategories.ts` - カテゴリ取得フック
- `frontend/src/lib/api/expense.ts` - カテゴリAPI

## コミット情報
- ブランチ: `fix/expense-list-mapping`
- コミットID: 1e4953e
- コミットメッセージ: refactor(frontend): 経費カテゴリ管理をAPIベースに統一化