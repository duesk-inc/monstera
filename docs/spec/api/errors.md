% API エラーモデル（Draft）

基本形式（サーバ標準）
```json
{
  "error": {
    "code": "AUTH_001",
    "message": "認証が必要です",
    "details": { "field": "reason" },
    "timestamp": "2025-08-21T12:34:56Z",
    "request_id": "req-xxxx"
  }
}
```

コード体系（抜粋）
- 認証/認可: `AUTH_xxx`（401/403/409）
- バリデーション: `VAL_xxx`（400）
- リソース: `RES_xxx`（404/409/423/410 等）
- ビジネス: `BIZ_xxx`（400/405/409/412/422/202/408）
- システム: `SYS_xxx`（5xx）
- データ: `DAT_xxx`（5xx）
- 週報固有: `W001-010` 系（基本/提出/編集/承認/未提出/統計/通知/アラート/エクスポート/部署）

HTTP マッピング（例）
- 認証失敗 `AUTH_002` → 401、権限不足 `AUTH_005` → 403
- バリデーション `VAL_*` → 400、NotFound `RES_001` → 404、Conflict `RES_002/003` → 409
- 週報提出不可 `W002B002` → 422、提出期限超過 `W002B003` → 408

クライアント方針
- 400: 入力やフォーマット修正（details でフィールド別表示）
- 401/403: 再ログイン/権限ガイド
- 404: リソースなし（週報 by-date-range は新規扱い）
- 409/423: 編集競合/ロック（再取得やリトライ）
- 422: 業務条件未満（状態遷移や提出条件の不備）
- 5xx: リトライ/サポート通知

参照
- 実装: `backend/internal/message/error_codes.go`
- 共通ハンドリング: `backend/internal/handler/handler_util.go`

