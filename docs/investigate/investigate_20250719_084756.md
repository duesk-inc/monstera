# エンジニア専用サイドバー実装調査

## 調査日時
2025-01-19 08:47:56

## 調査概要
エンジニアとしてログインした時に、エンジニア専用のサイドメニューを表示する機能の実装可能性と方法を調査。

## 要件
- エンジニア（employee/user）ロールでログイン時、専用のサイドバーを表示
- AdminSidebarと同じ作り（構造・スタイル）を維持
- ログインユーザー: engineer_test@duesk.co.jp / EmployeePass123!

## 現状分析

### 1. システム構成
- **認証管理**: ActiveRoleContextでロール管理を実装
- **ロール定義**: employee（エンジニア）、user（エンジニア・互換用）
- **レイアウト**: (authenticated)/layout.tsxで共通レイアウトを提供
- **サイドバー**: 現在はAdminSidebarコンポーネントのみ存在

### 2. 問題点
1. エンジニアログイン時も管理者用のAdminSidebarが表示される
2. レイアウトファイルでロールに応じた切り替えが実装されていない
3. エンジニア専用のサイドバーコンポーネントが存在しない

### 3. 技術的制約
- Material-UIを使用したUI実装
- Next.jsのApp Routerによるルーティング
- TypeScriptによる型安全性の確保
- 既存のAdminSidebarの設計パターンを踏襲する必要性

## 解決方針

### 1. 実装アプローチ
1. **EngineerSidebarコンポーネントの新規作成**
   - AdminSidebarと同じインターフェース・構造
   - エンジニア向けメニュー項目のみを表示
   - モバイル対応、折りたたみ機能、バッジ表示を継承

2. **レイアウトファイルの更新**
   - ActiveRoleContextを使用してロール判定
   - employee/userロールの場合はEngineerSidebar表示
   - それ以外のロールではAdminSidebar表示

3. **メニュー構成**
   - ダッシュボード
   - 週報
   - 勤怠管理
   - 経費申請
   - 休暇申請
   - スキルシート
   - 職務経歴
   - 提案管理
   - 通知設定
   - プロフィール

### 2. ファイル構成
- `/frontend/src/components/ui/EngineerSidebar.tsx` - 新規作成
- `/frontend/src/app/(authenticated)/layout.tsx` - 更新

### 3. 実装の優先順位
1. EngineerSidebarコンポーネントの作成
2. レイアウトファイルでのロール判定実装
3. 動作テスト

## リスク評価
- **低リスク**: 既存のAdminSidebarを参考に実装可能
- **中リスク**: ロール切り替え時の動作確認が必要
- **対策**: 十分なテストとロールベースのアクセス制御

## 推奨事項
1. **PLANフェーズへ進む**: 詳細な実装計画を策定
2. **段階的実装**: まずはEngineerSidebarを作成し、その後レイアウトを更新
3. **テスト重視**: engineer_test@duesk.co.jpでの動作確認を徹底

## 結論
エンジニア専用サイドバーの実装は技術的に可能であり、既存のAdminSidebarの構造を活用することで効率的に実装できる。PLANフェーズで詳細な実装手順を策定することを推奨する。