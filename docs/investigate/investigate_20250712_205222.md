# サイドメニューレイアウト調査報告書

## 調査日時
2025年7月12日 20:52:22

## 問題概要
サイドメニューが開いている状態で、コンテンツの左端が隠れてしまう問題が発生している。

## 調査対象・スコープ
- **フロントエンド**: レイアウトコンポーネント、サイドメニューコンポーネント
- **該当ファイル**:
  - `/frontend/src/components/common/layout/SharedLayoutWrapper.tsx`
  - `/frontend/src/components/ui/Sidebar.tsx`
  - `/frontend/src/app/(authenticated)/layout.tsx`
  - `/frontend/src/app/(admin)/layout.tsx`

## 現状分析

### アーキテクチャ構成
1. **SharedLayoutWrapper**: 共通レイアウトラッパーコンポーネント
   - サイドバーとメインコンテンツの配置を管理
   - モバイル/デスクトップの切り替え処理

2. **Sidebar/AdminSidebar**: サイドバーコンポーネント
   - 開閉状態に応じて幅を変更（開: 240px、閉: 68px）
   - `position: fixed`で固定配置
   - transitionアニメーション付き

3. **レイアウトコンポーネント**: 認証/管理者用レイアウト
   - サイドバーの開閉状態を管理
   - SharedLayoutWrapperに必要なプロパティを渡す

### 問題の根本原因
1. サイドバーが`position: fixed`で固定配置されている（Sidebar.tsx:89）
2. メインコンテンツにサイドバーの幅に応じた`margin-left`が設定されていない
3. 結果として、サイドバーがコンテンツの上に重なり、コンテンツの左端が隠れている

## 技術的制約
- Material-UI（MUI）を使用
- レスポンシブデザイン対応が必要（モバイル/デスクトップ）
- 既存のtransitionアニメーションとの整合性が必要
- サイドバーの開閉状態は各レイアウトコンポーネントで管理

## 解決方針
1. **SharedLayoutWrapperの修正**
   - メインコンテンツ（`<Box component="main">`）に`marginLeft`を追加
   - デスクトップ環境（`!isMobile`）の場合のみ適用
   - `sidebarWidth`の値を動的にマージンとして設定

2. **実装詳細**
   - サイドバーが開いている時: `margin-left: 240px`
   - サイドバーが閉じている時: `margin-left: 68px`
   - モバイル環境: `margin-left: 0`（現状維持）
   - transitionは既存の設定と同じ速度で同期

3. **影響範囲**
   - SharedLayoutWrapper.tsxのみの修正で対応可能
   - 認証レイアウト、管理者レイアウトの両方に自動的に適用

## 次フェーズへの推奨事項
1. **実装フェーズ（PLAN）**で以下を実施：
   - SharedLayoutWrapper.tsxの修正
   - デスクトップ環境でのマージン設定
   - モバイル環境での動作確認

2. **テスト項目**：
   - サイドバー開閉時のコンテンツ表示
   - レスポンシブ対応の確認
   - アニメーションの滑らかさ

## 結論
問題は明確に特定され、最小限の修正で解決可能。SharedLayoutWrapperコンポーネントにマージン設定を追加することで、サイドバーの開閉に応じてコンテンツが適切に表示されるようになる。