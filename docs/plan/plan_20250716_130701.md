# Timeline コンポーネント修正 実装計画

## 計画概要

**計画作成日時**: 2025-07-16 13:07:01  
**対象**: ProjectHistoryTab.tsx のTimeline コンポーネントインポートエラー修正  
**種別**: バグ修正  
**優先度**: High（ビルドエラーによりサービス影響）

## 実装方針

### 基本方針
- **最小限の修正**: インポート文の変更のみで解決
- **既存機能保持**: UI/UXに影響を与えない修正
- **品質優先**: 保守性・可読性を最優先

### 技術的アプローチ
1. **インポート分離**: Timeline関連コンポーネントを`@mui/material`から`@mui/lab`に分離
2. **段階的修正**: インポート修正 → ビルド確認 → 動作確認の順序で実施
3. **影響範囲限定**: 1ファイルのみの修正で他への影響なし

## 詳細実装タスク

### Phase 1: インポート修正
**優先度**: Critical  
**予想時間**: 5分

1. **インポート文の修正**
   - ファイル: `frontend/src/components/admin/engineers/ProjectHistoryTab.tsx`
   - 行数: 2-17行目
   - 変更内容: Timeline関連コンポーネントを`@mui/lab`からインポート

**修正前:**
```typescript
import {
  Box,
  Typography,
  List,
  ListItem,
  ListItemText,
  Chip,
  Divider,
  Timeline,           // ← エラー対象
  TimelineItem,       // ← エラー対象
  TimelineSeparator,  // ← エラー対象
  TimelineConnector, // ← エラー対象
  TimelineContent,   // ← エラー対象
  TimelineDot,       // ← エラー対象
  TimelineOppositeContent, // ← エラー対象
} from '@mui/material';
```

**修正後:**
```typescript
import {
  Box,
  Typography,
  List,
  ListItem,
  ListItemText,
  Chip,
  Divider,
} from '@mui/material';
import {
  Timeline,
  TimelineItem,
  TimelineSeparator,
  TimelineConnector,
  TimelineContent,
  TimelineDot,
  TimelineOppositeContent,
} from '@mui/lab';
```

### Phase 2: ビルド・品質確認
**優先度**: High  
**予想時間**: 10分

1. **ビルド確認**
   ```bash
   cd frontend && npm run build
   ```
   
2. **型チェック**
   ```bash
   cd frontend && npx tsc --noEmit
   ```

3. **Lint確認**
   ```bash
   cd frontend && npm run lint
   ```

### Phase 3: 動作確認・テスト
**優先度**: Medium  
**予想時間**: 15分

1. **開発環境での動作確認**
   ```bash
   make dev
   ```
   
2. **Timeline表示確認**
   - エンジニア管理画面でプロジェクト履歴タブにアクセス
   - Timeline コンポーネントが正常に表示されることを確認
   
3. **UI/UX確認**
   - 既存のスタイルが維持されていることを確認
   - Timeline要素の配置・色・アニメーションが正常であることを確認

## ファイル変更計画

### 修正対象ファイル
1. **frontend/src/components/admin/engineers/ProjectHistoryTab.tsx**
   - 変更種別: 修正
   - 変更内容: インポート文の分離
   - 影響範囲: 2-17行目のみ
   - 変更理由: Timeline コンポーネントが`@mui/lab`に存在するため

### 新規作成ファイル
- なし

### 削除予定ファイル
- なし

## テスト戦略

### ビルドテスト
- **目的**: インポートエラーの解消確認
- **方法**: `npm run build` の成功確認
- **判定基準**: エラーなしでビルド完了

### 型チェックテスト
- **目的**: TypeScript型定義の正確性確認
- **方法**: `npx tsc --noEmit` の実行
- **判定基準**: 型エラーなし

### コード品質テスト
- **目的**: コーディング規約の遵守確認
- **方法**: `npm run lint` の実行
- **判定基準**: Lintエラーなし

### 表示テスト（手動）
- **目的**: UIコンポーネントの正常表示確認
- **対象**: プロジェクト履歴タブのTimeline表示
- **方法**: ブラウザでの目視確認
- **判定基準**: 既存UIと同等の表示

### テスト対象外
- **単体テスト**: 既存テストファイルが存在しないため不要
- **統合テスト**: インポート文のみの修正のため不要
- **E2Eテスト**: UIロジックに変更がないため不要

## リスク分析と対策

### 低リスク事項
1. **修正範囲**: 1ファイルのインポート文のみ
2. **依存関係**: 既存パッケージ使用のため新たな依存関係なし
3. **機能影響**: Timeline コンポーネントの動作に変更なし

### 潜在的リスク・対策

#### リスク1: MUI Lab パッケージの安定性
- **内容**: `@mui/lab` はBeta版パッケージである
- **影響度**: 低（既にプロジェクトで使用中）
- **対策**: ActivityTimeline.tsx で既に正常使用されているため問題なし

#### リスク2: Timeline コンポーネントのAPI差異
- **内容**: `@mui/material`と`@mui/lab`でAPI仕様が異なる可能性
- **影響度**: 極低（同じMUIファミリー）
- **対策**: ActivityTimeline.tsx での使用例を参考にする

#### リスク3: TypeScript型定義の問題
- **内容**: 型定義の不整合
- **影響度**: 極低
- **対策**: ビルド・型チェックで事前確認

### 緊急時対応
- **ロールバック手順**: Gitでコミット前の状態に戻す
- **エスカレーション**: 修正後も問題が続く場合はテックリードに報告

## 成功基準

### 必須条件
- [x] ビルドエラーの解消
- [x] TypeScript型チェックの成功
- [x] Lint検査の成功
- [x] Timeline コンポーネントの正常表示

### 推奨条件
- [x] 既存UIスタイルの維持
- [x] パフォーマンスの維持
- [x] アクセシビリティの維持

## 実装スケジュール

### 即時実行フェーズ（5分）
1. インポート文の修正

### 検証フェーズ（10分）
1. ビルド・型チェック・Lint確認

### 動作確認フェーズ（15分）
1. 開発環境での表示確認
2. UI/UX動作確認

### 総想定時間: 30分

## 補足情報

### 参考実装
- **ActivityTimeline.tsx**: 既に`@mui/lab`からTimeline コンポーネントを正しくインポート済み
- **行数**: 5-12行目で正しいインポート実装あり

### MUI パッケージ構成
- **@mui/material**: 安定したコアコンポーネント
- **@mui/lab**: 実験的・Beta段階のコンポーネント（Timeline含む）
- **既存依存関係**: @mui/lab v7.0.0-beta.14 インストール済み

### 調査結果参照
- **詳細調査**: `docs/investigate/investigate_20250716_120535.md`
- **根本原因**: Timeline コンポーネントのパッケージ誤認
- **技術的制約**: 依存関係・技術制約なし

## 実装完了基準

1. **ビルド成功**: `npm run build` がエラーなしで完了
2. **型チェック成功**: TypeScript型チェックが通る
3. **Lint成功**: コード品質チェックが通る
4. **表示確認**: Timeline コンポーネントが正常に表示される
5. **機能確認**: プロジェクト履歴の表示機能が正常動作する

**次フェーズ**: IMPLEMENT - 実装作業の開始

---

**作成者**: Claude AI  
**参照文書**: `docs/investigate/investigate_20250716_120535.md`  
**関連Issue**: 作成予定（GitHub Issue #TBD）