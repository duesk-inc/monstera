# APIクライアント リファクタリング計画

## 計画概要
2025年1月17日に策定された、フロントエンドAPIクライアントの段階的リファクタリング計画。

## 実装フェーズ
### Phase 1: 環境変数と設定の統一（3時間）
- 環境変数の整理と統一
- 後方互換性を維持しながら新変数へ移行
- NEXT_PUBLIC_API_HOST と NEXT_PUBLIC_API_VERSION に統一

### Phase 2: インポートパス統一（5時間）
- 全ファイルで @/lib/api からのインポートに統一
- 一括置換スクリプトによる安全な移行
- E2Eテストによる動作確認

### Phase 3: ファクトリパターン統合（8時間）
- 3つの実装パターンを1つに統合
- インターセプターの重複を解消
- シングルトンパターンでパフォーマンス向上

### Phase 4: 不要コード削除（2時間）
- /lib/axios.ts の削除
- レガシーコードのクリーンアップ
- コード量30%削減目標

## 重要な設計決定
- 段階的移行により既存機能への影響を最小化
- 各Phaseは独立して実行・テスト可能
- 後方互換性レイヤーで3ヶ月の移行期間を確保

## 成功指標
- コード行数: 30%削減
- テストカバレッジ: 80%以上
- バグ発生率: 40%低減
- 新規開発者オンボーディング: 50%時間短縮

## リスク管理
- Phase単位でのロールバック手順を準備
- 各Phaseに20%のバッファ時間を確保
- E2Eテストで認証フローを重点的に確認

## 文書参照
- 分析結果: docs/analyze/refactor-analyze_20250117_134500.md
- 実装計画: docs/plan/refactor-plan_20250117_135200.md