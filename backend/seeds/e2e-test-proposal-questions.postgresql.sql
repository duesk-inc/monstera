-- E2E Test Proposal Questions Data -- Create questions for each proposal (2-3 questions per proposal) -- Clean up existing test questions DELETE FROM proposal_questions WHERE id LIKE 'e2e00006%';
-- Create questions for each proposal INSERT INTO proposal_questions ( id, proposal_id, question_text, response_text, sales_user_id, is_responded, responded_at, created_at, updated_at ) VALUES -- Questions for Proposal 1: Web application (proposed, new) ( 'e2e00006-0000-0000-0000-000000000001', 'e2e00005-0000-0000-0000-000000000001', 'プロジェクトで使用する技術スタックの詳細を教えてください。', 'フロントエンドはReact 18、TypeScript 5を使用します。バックエンドはNode.js 18、Express、PostgreSQLです。', 'e2e00001-0000-0000-0000-000000000002', -- sales_test user TRUE, DATE_SUB(NOW(), INTERVAL 6 HOUR), DATE_SUB(NOW(), INTERVAL 6 HOUR), DATE_SUB(NOW(), INTERVAL 5 HOUR) ), ( 'e2e00006-0000-0000-0000-000000000002', 'e2e00005-0000-0000-0000-000000000001', 'リモートワークは可能でしょうか？', NULL, NULL, FALSE, NULL, DATE_SUB(NOW(), INTERVAL 2 HOUR), DATE_SUB(NOW(), INTERVAL 2 HOUR) ), -- Questions for Proposal 2: Cloud infrastructure (proposed) ( 'e2e00006-0000-0000-0000-000000000003', 'e2e00005-0000-0000-0000-000000000002', 'AWS経験はどの程度必要でしょうか？', 'AWSソリューションアーキテクト資格相当の知識と、実務経験2年以上を希望しています。', 'e2e00001-0000-0000-0000-000000000002', TRUE, DATE_SUB(NOW(), INTERVAL 1 DAY), DATE_SUB(NOW(), INTERVAL 1 DAY), DATE_SUB(NOW(), INTERVAL 20 HOUR) ), ( 'e2e00006-0000-0000-0000-000000000004', 'e2e00005-0000-0000-0000-000000000002', 'Terraformの使用経験は必須でしょうか？', '必須ではありませんが、Infrastructure as Codeの経験があると望ましいです。', 'e2e00001-0000-0000-0000-000000000002', TRUE, DATE_SUB(NOW(), INTERVAL 12 HOUR), DATE_SUB(NOW(), INTERVAL 12 HOUR), DATE_SUB(NOW(), INTERVAL 10 HOUR) ), ( 'e2e00006-0000-0000-0000-000000000005', 'e2e00005-0000-0000-0000-000000000002', 'チームの規模はどのくらいですか？', NULL, NULL, FALSE, NULL, DATE_SUB(NOW(), INTERVAL 3 HOUR), DATE_SUB(NOW(), INTERVAL 3 HOUR) ), -- Questions for Proposal 3: Data analysis (proceed) ( 'e2e00006-0000-0000-0000-000000000006', 'e2e00005-0000-0000-0000-000000000003', 'BigQueryの使用経験はありますが、データ分析基盤の構築経験はありません。問題ないでしょうか？', 'BigQueryの経験があれば問題ありません。基盤構築についてはチームでサポートします。', 'e2e00001-0000-0000-0000-000000000002', TRUE, DATE_SUB(NOW(), INTERVAL 6 DAY), DATE_SUB(NOW(), INTERVAL 6 DAY), DATE_SUB(NOW(), INTERVAL 6 DAY) ), ( 'e2e00006-0000-0000-0000-000000000007', 'e2e00005-0000-0000-0000-000000000003', '作業場所はどちらになりますか？', '基本的に六本木のクライアントオフィスですが、週2日程度のリモートワークが可能です。', 'e2e00001-0000-0000-0000-000000000002', TRUE, DATE_SUB(NOW(), INTERVAL 5 DAY), DATE_SUB(NOW(), INTERVAL 5 DAY), DATE_SUB(NOW(), INTERVAL 5 DAY) ), -- Questions for Proposal 4: Mobile app (proposed, recent) ( 'e2e00006-0000-0000-0000-000000000008', 'e2e00005-0000-0000-0000-000000000004', 'React Nativeの実務経験は必須でしょうか？', NULL, NULL, FALSE, NULL, DATE_SUB(NOW(), INTERVAL 18 HOUR), DATE_SUB(NOW(), INTERVAL 18 HOUR) ), ( 'e2e00006-0000-0000-0000-000000000009', 'e2e00005-0000-0000-0000-000000000004', 'iOS/Android両方の開発が必要ですか？', NULL, NULL, FALSE, NULL, DATE_SUB(NOW(), INTERVAL 12 HOUR), DATE_SUB(NOW(), INTERVAL 12 HOUR) ), ( 'e2e00006-0000-0000-0000-000000000010', 'e2e00005-0000-0000-0000-000000000004', 'アプリの規模感を教えてください。', NULL, NULL, FALSE, NULL, DATE_SUB(NOW(), INTERVAL 6 HOUR), DATE_SUB(NOW(), INTERVAL 6 HOUR) ), -- Questions for Proposal 5: Security (declined) ( 'e2e00006-0000-0000-0000-000000000011', 'e2e00005-0000-0000-0000-000000000005', 'セキュリティ関連の資格は必要でしょうか？', 'CISSP、情報処理安全確保支援士などの資格があると望ましいですが、必須ではありません。', 'e2e00001-0000-0000-0000-000000000002', TRUE, DATE_SUB(NOW(), INTERVAL 3 DAY), DATE_SUB(NOW(), INTERVAL 3 DAY), DATE_SUB(NOW(), INTERVAL 3 DAY) ), ( 'e2e00006-0000-0000-0000-000000000012', 'e2e00005-0000-0000-0000-000000000005', 'ペネトレーションテストの経験がありませんが大丈夫でしょうか？', '申し訳ございませんが、今回はペネトレーションテスト経験者を優先させていただきます。', 'e2e00001-0000-0000-0000-000000000002', TRUE, DATE_SUB(NOW(), INTERVAL 3 DAY), DATE_SUB(NOW(), INTERVAL 3 DAY), DATE_SUB(NOW(), INTERVAL 3 DAY) );
-- Verify the questions were created SELECT 'Questions created:' as info;
SELECT q.id, p.status as proposal_status, LEFT(q.question_text, 50) as question_preview, q.is_responded, CASE WHEN q.sales_user_id IS NOT NULL THEN u.email ELSE 'No response yet' END as responded_by FROM proposal_questions q JOIN proposals p ON q.proposal_id = p.id LEFT JOIN users u ON q.sales_user_id = u.id WHERE q.id LIKE 'e2e00006%' ORDER BY q.created_at DESC;
-- Summary by proposal SELECT 'Questions per proposal:' as info;
SELECT p.id as proposal_id, proj.project_name, p.status, COUNT(q.id) as question_count, SUM(CASE WHEN q.is_responded = TRUE THEN 1 ELSE 0 END) as answered_count, SUM(CASE WHEN q.is_responded = FALSE THEN 1 ELSE 0 END) as unanswered_count FROM proposals p JOIN projects proj ON p.project_id = proj.id LEFT JOIN proposal_questions q ON p.id = q.proposal_id WHERE p.id LIKE 'e2e00005%' GROUP BY p.id, proj.project_name, p.status ORDER BY p.created_at DESC;
