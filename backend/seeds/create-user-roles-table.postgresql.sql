-- Create user_roles table if it doesn't exist -- This is a temporary fix for E2E testing CREATE TABLE IF NOT EXISTS user_roles ( user_id VARCHAR(36) NOT NULL, role TINYINT NOT NULL, created_at DATETIME(3) NOT NULL DEFAULT CURRENT_TIMESTAMP(3), PRIMARY KEY (user_id, role), FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE, INDEX idx_user_roles_user_id (user_id), INDEX idx_user_roles_role (role) ) ENGINE=InnoDB COMMENT='ユーザーロール中間テーブル';
-- Insert roles for existing test users INSERT IGNORE INTO user_roles (user_id, role) SELECT id, role FROM users WHERE email IN ('engineer_test@duesk.co.jp', 'sales_test@duesk.co.jp', 'manager_test@duesk.co.jp');
