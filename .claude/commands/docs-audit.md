# DOCS-AUDIT フェーズ

# ユーザの入力
#$ARGUMENTS

## 目的
プロジェクトドキュメントの状態を総合的に監査し、古い情報の特定、重複の検出、構造の最適化を行う。

## 注意事項
- **Model: Opus** - ドキュメント全体の分析には必ず**ultrathink**で深く検討すること
- Serenaを活用してコードベースとドキュメントの整合性を確認すること
- 削除の判断は慎重に行い、必要に応じてアーカイブすること
- ドキュメントの歴史的価値も考慮すること

## 必要な入力
- 監査対象ディレクトリ（デフォルト: docs/）
- 監査の重点項目（古さ/重複/構造）
- 基準日（いつ以前を古いとするか）

## Serena活用ポイント
```bash
# 1. コード参照の検証
search_for_pattern("class|func|interface名")  # ドキュメント内の参照確認
find_symbol("参照されているシンボル")  # 実際の存在確認

# 2. API仕様の照合
find_symbol("Handler", depth=2)  # 実装との比較
search_for_pattern("endpoint|route")

# 3. データモデルの確認
get_symbols_overview("backend/model")
search_for_pattern("CREATE TABLE|ALTER TABLE")
```

## タスクに含まれるべきTODO
1. ユーザの指示を理解し、監査開始をコンソールで通知
2. 現在のブランチを確認し、`docs/audit-<目的>` ブランチを作成
3. **ultrathinkでドキュメント監査戦略を深く検討**
4. **ドキュメント構造の把握**
   - ディレクトリ構造の分析
   - ファイル命名規則の確認
   - 相互参照の確認
5. **タイムスタンプ分析**
   - ファイル更新日時の確認
   - 内容の日付記載確認
   - 関連コードの最終更新確認
6. **内容の鮮度チェック**
   - API仕様とコードの照合
   - データモデルの一致確認
   - 設定値・環境情報の確認
   - 廃止された機能の記載確認
7. **重複・冗長性の検出**
   - 類似内容のファイル特定
   - 重複する説明の検出
   - 統合可能なドキュメント特定
8. **参照整合性の確認**
   - 内部リンクの有効性
   - コード参照の正確性
   - 画像・図表の存在確認
9. **構造最適化の提案**
   - より良いディレクトリ構成
   - ファイル統合・分割案
   - 命名規則の統一案
10. **優先度付け**
    - 緊急度（影響大）
    - 重要度（利用頻度）
    - 作業工数
11. 監査結果を `docs/audit/docs-audit_{TIMESTAMP}.md` に保存
12. 改善計画の作成
13. `afplay /System/Library/Sounds/Sosumi.aiff` で完了通知
14. 監査サマリー、ブランチ名をコンソール出力

## 監査カテゴリー

### 1. 鮮度監査
- **最新**: 1ヶ月以内に更新
- **要確認**: 1-3ヶ月前
- **古い**: 3-6ヶ月前
- **非常に古い**: 6ヶ月以上

### 2. 整合性監査
- **一致**: コードと完全一致
- **軽微な差異**: 些細な違い
- **重要な差異**: 機能的な違い
- **廃止**: もう存在しない機能

### 3. 重複度監査
- **独立**: 重複なし
- **部分重複**: 30%未満
- **高重複**: 30-70%
- **ほぼ同一**: 70%以上

### 4. 構造監査
- **最適**: 現状で問題なし
- **改善可能**: 小規模な調整
- **要再構成**: 大幅な見直し必要

## 出力ファイル
- `docs/audit/docs-audit_{TIMESTAMP}.md`

## 最終出力形式
### 監査完了（問題なし）の場合
status: SUCCESS
next: NONE
details: "ドキュメント監査完了。docs-audit_{TIMESTAMP}.mdに詳細記録。大きな問題なし。"

### 更新が必要な場合
status: NEEDS_UPDATE
next: DOCS-UPDATE
details: "監査完了。docs-audit_{TIMESTAMP}.mdに詳細記録。X件の更新必要。更新フェーズへ。"

### 構造改善が必要な場合
status: NEEDS_RESTRUCTURE
next: DOCS-ORGANIZE
details: "監査完了。docs-audit_{TIMESTAMP}.mdに詳細記録。構造の大幅な改善必要。"