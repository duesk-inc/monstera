# DOCS-CONSOLIDATE フェーズ

# ユーザの入力
#$ARGUMENTS

## 目的
散在している関連情報を統合し、重複を排除して、シンプルで理解しやすいドキュメントに再構成する。情報の質を保ちながら量を最適化する。

## 注意事項
- **Model: Opus** - 情報の統合と再構成には必ず**ultrathink**で深く検討すること
- 重要な情報を失わないよう、統合前に完全なバックアップを作成すること
- 読み手の視点で情報を整理し、アクセシビリティを向上させること
- Serenaを活用して、コードとの整合性を維持すること

## 必要な入力
- 統合対象（特定のトピック/機能/ディレクトリ）
- 統合の目的（簡潔化/一元化/重複排除）
- 優先する情報の基準（最新性/詳細度/実用性）

## Serena活用ポイント
```bash
# 1. トピックの関連ファイル検索
search_for_pattern("統合対象のキーワード", "docs")
find_file("*対象機能*.md", "docs")

# 2. 内容の類似性分析
search_for_pattern("特徴的なフレーズや用語")

# 3. コード参照の確認
find_symbol("ドキュメントで言及されているシンボル")
search_for_pattern("コード例|example|サンプル")
```

## タスクに含まれるべきTODO
1. ユーザの指示を理解し、統合作業開始をコンソールで通知
2. 現在のブランチを確認し、`docs/consolidate-<トピック>` ブランチを作成
3. **ultrathinkで統合戦略を深く検討**
4. **関連ドキュメントの収集**
   - キーワード検索による抽出
   - ディレクトリ構造からの特定
   - 相互参照の追跡
   - 類似内容の検出
5. **内容分析と分類**
   - コア情報の特定
   - 重複部分のマッピング
   - 補完関係の把握
   - 古い/不正確な情報の識別
6. **情報の優先度付け**
   - 必須情報（Must Have）
   - 重要情報（Should Have）
   - あると良い情報（Nice to Have）
   - 削除候補（Obsolete）
7. **統合構造の設計**
   - 論理的な情報の流れ
   - 適切な見出し階層
   - クロスリファレンスの最適化
8. **統合作業の実施**
   - **導入部の統一**
     - 目的と概要の明確化
     - 前提条件の整理
   - **本文の再構成**
     - 重複の除去
     - 情報の論理的配置
     - 説明の簡潔化
   - **コード例の統合**
     - 最新のベストプラクティス
     - 動作確認済みのサンプル
   - **参照情報の整理**
     - 関連リンクの更新
     - 用語集の統一
9. **品質向上の施策**
   - 一貫した用語使用
   - 明確な文章構造
   - 視覚的な改善（図表・リスト）
   - 検索性の向上
10. **レビューと検証**
    - 情報の完全性確認
    - コードとの整合性確認
    - 読みやすさの評価
11. 統合前後の比較レポート作成
12. 統合結果を `docs/consolidate/docs-consolidate_{TIMESTAMP}.md` に記録
13. 統合されたドキュメントを適切な場所に保存
14. 統合パターンをSerenaメモリに記録
15. `afplay /System/Library/Sounds/Sosumi.aiff` で完了通知
16. 統合結果サマリー、ブランチ名をコンソール出力

## 統合原則

### 1. 情報の階層化
- 概要 → 詳細の流れ
- 一般的 → 特殊なケース
- 基本 → 応用

### 2. 重複の処理
- 完全重複: 最新・最適なものを採用
- 部分重複: 統合して包括的に
- 補完的: 適切に組み合わせ

### 3. 簡潔性の追求
- 1文1意味
- 箇条書きの活用
- 不要な修飾語の削除

### 4. 実用性の重視
- すぐに使える情報を前面に
- 実例とユースケース
- トラブルシューティング

## 統合効果の測定
```
統合前:
- ファイル数: X
- 総行数: Y
- 重複率: Z%

統合後:
- ファイル数: A（X-B削減）
- 総行数: C（Y-D削減）
- 情報密度: E%向上
```

## 出力ファイル
- `docs/consolidate/docs-consolidate_{TIMESTAMP}.md` - 統合作業記録
- 統合後のドキュメントファイル
- `docs/archive/pre-consolidate/` - 統合前のバックアップ

## 最終出力形式
### 統合成功の場合
status: SUCCESS
next: DOCS-ORGANIZE
details: "ドキュメント統合完了。docs-consolidate_{TIMESTAMP}.mdに詳細記録。X件を統合しY%削減。"

### 追加統合が必要な場合
status: PARTIAL_COMPLETE
next: DOCS-CONSOLIDATE
details: "初期統合完了。docs-consolidate_{TIMESTAMP}.mdに詳細記録。関連トピックの統合継続。"

### レビューが必要な場合
status: NEEDS_REVIEW
next: USER_INPUT
details: "統合案作成。docs-consolidate_{TIMESTAMP}.mdに詳細記録。重要な変更のため確認必要。"