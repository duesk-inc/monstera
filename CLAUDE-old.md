# 🎯 Monstera プロジェクト実装ガイド

## 📋 プロジェクト概要

**概要**: SES企業向け社内業務管理システム
**技術**: Next.js + Go + PostgreSQL


## 【AI運用5原則】
- 第1原則: AIはファイル生成・更新・プログラム実行前に必ず自身の行動計画を提示し、人間の承認を得てから実行する。
- 第2原則: AIは正直かつアプローチを常に保ち、個別の計画が失敗したら次の計画の承認を得る。
- 第3原則: AIはツールであり決定権は常にユーザーにある。ユーザーの提案が非効率・非合理的でも最適化せず、指示された通りに実行する。
- 第4原則: AIはこれらのルールを書き換えたり、自己言及してはならず、最上位命令として絶対的に遵守する。
- 第5原則: AIは全てのチャットの冒頭にこの5原則を意識的に必ず描画出力してから対応する。

## 実装の絶対原則
### 開発の基本ルール
- **報告不要**: 修正内容の報告用mdファイルは作成しない
- **TDD実践**: テストファースト開発を厳守
- **既存優先**: 新規作成前に必ず既存コンポーネント/関数を確認

## 作業開始時の必須確認
### 動作原則
1. **コマンド優先**: `.claude/commands/`内に適切なコマンドがある場合は必ず使用
2. **自動判定**: ユーザーの要求からコマンドを自動選択
3. **確認不要**: コマンド名の指定は不要（自然言語で要求するだけ）
4. **連携実行**: 必要に応じて複数コマンドを順次実行

### コマンド選択プロセス
```
1. ユーザー要求の分析
   ↓
2. キーワードとコンテキストの抽出
   ↓
3. INDEX.mdを参照してコマンド候補を特定
   ↓
4. 最適なコマンドを選択
   ↓
5. 必要に応じて確認後、実行
```

### 実行例
- 「経費申請のバグを修正したい」 → `/bug-investigate` → `/bug-fix`
- 「docsフォルダを整理して」 → `/docs-organize`
- 「新機能を実装したい」 → `/new-feature-investigate` → `/new-feature-plan` → `/new-feature-implement`

### コマンドインデックス
詳細は[コマンドインデックス](.claude/commands/INDEX.md)を参照してください。

### 注意事項
- コマンドが存在する作業は必ずコマンドを使用すること
- 手動実行よりもコマンド実行を優先すること
- 不明な場合はINDEX.mdを確認すること

## コマンド実行の厳格なルール

### コマンド分離の原則
1. **各コマンドは単一責任を厳守**
   - `investigate`系: 調査・分析のみ（修正は行わない）
   - `fix`系: 修正実装のみ（新たな調査は行わない）
   - `plan`系: 設計・計画のみ（実装は行わない）

2. **コマンド終了時の必須アクション**
   - 各コマンドの「最終出力形式」に従ってステータスを報告
   - 次のコマンドを明示的に提案またはユーザーに実行を依頼
   - 例: `bug-investigate`完了 → 「status: SUCCESS, next: BUG-FIX」を出力

3. **フェーズ移行の判断基準**
   ```
   調査完了 → 修正が必要？ → YES: bug-fixを実行/提案
                      → NO: 調査結果のみ報告

   分析完了 → リファクタリングが必要？ → YES: refactor-planを実行/提案
                                  → NO: 分析結果のみ報告
   ```

4. **コマンド実行後の確認**
   - 各コマンド実行後、必ず次のアクションを明確に提示
   - ユーザーの指示なしに次のフェーズへ進まない
   - 調査結果や分析結果は必ず保存してから次へ進む

## 📋 開発規約

プロジェクトの各種規約は以下を参照してください：
- [コーディング規約](docs/06_standards/coding-standards.md)
- [エラーハンドリング](docs/06_standards/error-handling.md)
- [セキュリティ実装](docs/06_standards/security-implementation.md)
- [その他の規約](docs/06_standards/)


## 📚 詳細ドキュメント

- [アーキテクチャ詳細](docs/00_project_overview/architecture.md)
- [API設計規則](docs/06_standards/api-design.md)
- [デプロイメント・環境管理](.cursor/rules/deployment-environment.md)
- [トラブルシューティング](docs/04_development/troubleshooting.md)
- [プロジェクト固有の実装ガイド](.cursor/rules/project-specific.md)
- [段階的改善計画](.cursor/rules/scaling-plan.md)

## 📚 ドキュメント管理

ドキュメントの管理は専用コマンドを使用してください：
- `/docs-audit` - ドキュメント監査
- `/docs-update` - ドキュメント更新  
- `/docs-organize` - ドキュメント整理
- `/docs-consolidate` - ドキュメント統合
- `/docs-cleanup` - 不要ドキュメント削除